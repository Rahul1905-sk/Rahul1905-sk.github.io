import{i as L,_ as W}from"./@babel-6f9f5107.js";import{r as u}from"./react-c1a9316a.js";import{u as F}from"./use-latest-a290cb72.js";import{u as A}from"./use-composed-ref-6d0322a9.js";var w={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},H=function(r){Object.keys(w).forEach(function(t){r.style.setProperty(t,w[t],"important")})},i=null,I=function(r,t){var e=r.scrollHeight;return t.sizingStyle.boxSizing==="border-box"?e+t.borderSize:e-t.paddingSize};function k(o,r,t,e){t===void 0&&(t=1),e===void 0&&(e=1/0),i||(i=document.createElement("textarea"),i.setAttribute("tabindex","-1"),i.setAttribute("aria-hidden","true"),H(i)),i.parentNode===null&&document.body.appendChild(i);var n=o.paddingSize,a=o.borderSize,d=o.sizingStyle,c=d.boxSizing;Object.keys(d).forEach(function(p){var v=p;i.style[v]=d[v]}),H(i),i.value=r;var h=I(i,o);i.value="x";var l=i.scrollHeight-n,s=l*t;c==="border-box"&&(s=s+n+a),h=Math.max(s,h);var f=l*e;return c==="border-box"&&(f=f+n+a),h=Math.min(f,h),[h,l]}var R=function(){},B=function(r,t){return r.reduce(function(e,n){return e[n]=t[n],e},{})},M=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],N=!!document.documentElement.currentStyle,_=function(r){var t=window.getComputedStyle(r);if(t===null)return null;var e=B(M,t),n=e.boxSizing;if(n==="")return null;N&&n==="border-box"&&(e.width=parseFloat(e.width)+parseFloat(e.borderRightWidth)+parseFloat(e.borderLeftWidth)+parseFloat(e.paddingRight)+parseFloat(e.paddingLeft)+"px");var a=parseFloat(e.paddingBottom)+parseFloat(e.paddingTop),d=parseFloat(e.borderBottomWidth)+parseFloat(e.borderTopWidth);return{sizingStyle:e,paddingSize:a,borderSize:d}},j=function(r){var t=F(r);u.useLayoutEffect(function(){var e=function(a){t.current(a)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[])},P=function(r,t){var e=r.cacheMeasurements,n=r.maxRows,a=r.minRows,d=r.onChange,c=d===void 0?R:d,h=r.onHeightChange,l=h===void 0?R:h,s=L(r,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),f=s.value!==void 0,p=u.useRef(null),v=A(p,t),z=u.useRef(0),b=u.useRef(),x=function(){var g=p.current,S=e&&b.current?b.current:_(g);if(S){b.current=S;var y=k(S,g.value||g.placeholder||"x",a,n),m=y[0],T=y[1];z.current!==m&&(z.current=m,g.style.setProperty("height",m+"px","important"),l(m,{rowHeight:T}))}},C=function(g){f||x(),c(g)};return u.useLayoutEffect(x),j(x),u.createElement("textarea",W({},s,{onChange:C,ref:v}))},$=u.forwardRef(P);const Z=$;export{Z as T};
